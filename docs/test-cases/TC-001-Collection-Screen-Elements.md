# TC-001: Проверка элементов экрана Collection

## Информация о тесте

| Параметр | Значение |
|----------|----------|
| **ID** | TC-001 |
| **Название** | Проверка всех элементов на экране коллекции серий |
| **Приоритет** | Высокий |
| **Тип** | UI / Smoke |
| **Автор** | QA Team |
| **Дата создания** | 2025-01-04 |

## Описание

Тест проверяет корректное отображение всех UI элементов на главном экране коллекции серий (Anime/Manga) после успешной авторизации пользователя.

## Предусловия

1. Приложение установлено на устройстве
2. Есть активная учетная запись пользователя:
   - Email: testprofdepo@gmail.com
   - Password: Qwerty123
3. У пользователя есть добавленные аниме или манга в коллекции
4. Устройство подключено к интернету

## Тестовые данные

- **Пользователь**: TEST_USER_1
- **Email**: testprofdepo@gmail.com
- **Password**: Qwerty123

## Шаги выполнения

| # | Действие | Ожидаемый результат |
|---|----------|-------------------|
| 1 | Запустить приложение | Приложение открывается, отображается экран логина |
| 2 | Ввести email: testprofdepo@gmail.com | Email введен в поле "Kitsu email" |
| 3 | Ввести пароль: Qwerty123 | Пароль введен в поле "Password" |
| 4 | Нажать кнопку "Login" | Происходит авторизация, загружается главный экран |
| 5 | Дождаться загрузки экрана коллекции (3 сек) | Экран коллекции полностью загружен |
| 6 | Проверить отображение Root элемента экрана | Root элемент отображается |
| 7 | Проверить кнопку "Filter" в TopBar | Кнопка отображается и активна |
| 8 | Проверить кнопку "Sort" в TopBar | Кнопка отображается и активна |
| 9 | Проверить кнопку "Refresh" в TopBar | Кнопка отображается и активна |
| 10 | Проверить FAB кнопку поиска | FAB кнопка существует (может быть скрыта) |
| 11 | Проверить контейнер со списком серий | Контейнер RefreshContainer отображается |
| 12 | Проверить наличие карточек серий | Контейнер содержит карточки с аниме/манга |

## Проверяемые элементы

### TopBar (Верхняя панель)
- ✅ Заголовок экрана (Anime или Manga)
- ✅ Кнопка **Filter** (фильтрация списка)
- ✅ Кнопка **Sort** (сортировка списка)
- ✅ Кнопка **Refresh** (обновление списка)

### Основной контент
- ✅ **RefreshContainer** - контейнер со списком серий
- ✅ Карточки серий (минимум 2 карточки)

### Floating элементы
- ✅ **SearchFAB** - floating action button для поиска
  - Текст: "Add new"
  - Иконка: "+"
  - Появляется при скролле вверх

### Дополнительные элементы
- ⚠️ **EmptyView** - отображается если список пуст (не проверяется в этом тесте)
- ⚠️ **Snackbar** - уведомления об ошибках (не проверяется в этом тесте)

## Ожидаемый результат

✅ **Тест пройден**, если:
- Все элементы TopBar отображаются корректно
- Все кнопки активны и доступны для взаимодействия
- FAB кнопка поиска существует в DOM
- Контейнер со списком серий отображается
- В контейнере присутствуют карточки с аниме/манга

❌ **Тест провален**, если:
- Какой-либо элемент UI не отображается
- Кнопки неактивны или недоступны
- Контейнер со списком пуст (при наличии серий у пользователя)
- Происходит crash или зависание приложения

## Постусловия

- Пользователь остается авторизованным
- Экран коллекции полностью загружен
- Можно продолжить взаимодействие с приложением

## Связанные тест-кейсы

- TC-002: Обновление списка серий
- TC-003: Фильтрация коллекции
- TC-004: Сортировка коллекции
- TC-005: Добавление новой серии через поиск

## Автоматизация

- ✅ Тест автоматизирован
- **Файл**: `CollectionScreenTest.kt`
- **Метод**: `checkAllCollectionScreenElements()`
- **Путь**: `/app/src/androidTest/java/com/chesire/nekome/tests/CollectionScreenTest.kt`

## Примечания

1. Время загрузки экрана может варьироваться в зависимости от скорости интернета (используется задержка 3 секунды)
2. FAB кнопка может быть скрыта при скролле списка вниз - это нормальное поведение
3. В тесте используется `flakySafely` с таймаутом 10 секунд для устойчивости к нестабильности сети
4. Детальная проверка содержимого карточек серий выполняется в отдельных тест-кейсах

## Скриншоты

![Collection Screen](../screenshots/collection-screen.png)

*Примечание: Скриншот показывает экран коллекции с отмеченными проверяемыми элементами*

## История изменений

| Дата | Версия | Автор | Изменения |
|------|---------|-------|-----------|
| 2025-01-04 | 1.0 | QA Team | Создание тест-кейса |

