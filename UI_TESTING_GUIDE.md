# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é (Compose + Kaspresso)

## üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ç–µ—Å—Ç–æ–≤)
3. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
4. [–°–æ–∑–¥–∞–Ω–∏–µ Page Objects](#—Å–æ–∑–¥–∞–Ω–∏–µ-page-objects)
5. [–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤](#–Ω–∞–ø–∏—Å–∞–Ω–∏–µ-—Ç–µ—Å—Ç–æ–≤)
6. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)
7. [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)

---

## –í–≤–µ–¥–µ–Ω–∏–µ

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ –¥–ª—è UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Compose –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

### üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| **Kaspresso** | –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ Espresso) |
| **Kakao Compose** | DSL –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Compose —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ |
| **Jetpack Compose Test** | –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Compose |
| **Allure** | –ö—Ä–∞—Å–∏–≤—ã–µ –æ—Ç—á–µ—Ç—ã –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| **Hilt** | Dependency Injection –¥–ª—è —Ç–µ—Å—Ç–æ–≤ |
| **MockK** | –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π |

### ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - Kaspresso –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç flaky —Ç–µ—Å—Ç—ã  
‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - DSL –¥–µ–ª–∞–µ—Ç —Ç–µ—Å—Ç—ã –ø–æ–Ω—è—Ç–Ω—ã–º–∏  
‚úÖ **Page Object** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞  
‚úÖ **–°–∫—Ä–∏–Ω—à–æ—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏  
‚úÖ **Allure –æ—Ç—á–µ—Ç—ã** - –∫—Ä–∞—Å–∏–≤—ã–µ –æ—Ç—á–µ—Ç—ã —Å —à–∞–≥–∞–º–∏  

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
app/src/androidTest/
‚îú‚îÄ‚îÄ java/com/chesire/nekome/
‚îÇ   ‚îú‚îÄ‚îÄ base/                    # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BaseComposeTest.kt        # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ BaseComposeScreen.kt      # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è Page Objects
‚îÇ   ‚îú‚îÄ‚îÄ pageobjects/             # Page Objects (—ç–∫—Ä–∞–Ω—ã)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginScreen.kt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SeriesListScreen.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ tests/                   # –°–∞–º–∏ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginFlowComposeTest.kt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SeriesListComposeTest.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ helpers/                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ TestHelpers.kt
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã

**1. Page Object Pattern** - –∫–∞–∂–¥—ã–π —ç–∫—Ä–∞–Ω = –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å  
**2. DSL** - chainable –º–µ—Ç–æ–¥—ã –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏  
**3. Test Case** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é `step()`  

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç

```kotlin
import com.chesire.nekome.base.BaseComposeTest
import dagger.hilt.android.testing.HiltAndroidTest
import org.junit.Test
import org.junit.runner.RunWith
import androidx.test.ext.junit.runners.AndroidJUnit4

@HiltAndroidTest
@RunWith(AndroidJUnit4::class)
class MyFeatureTest : BaseComposeTest() {

    @Test
    fun testMyFeature() = run {
        step("–®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω") {
            // –î–µ–π—Å—Ç–≤–∏—è
        }
        
        step("–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç") {
            // –ü—Ä–æ–≤–µ—Ä–∫–∏
        }
    }
}
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ Page Object

```kotlin
import com.chesire.nekome.base.BaseComposeScreen
import androidx.compose.ui.test.SemanticsNodeInteractionsProvider

class MyScreen(semanticsProvider: SemanticsNodeInteractionsProvider) :
    BaseComposeScreen<MyScreen>(semanticsProvider) {

    val button = createNode("MyButton")
    val textField = createNode("MyTextField")
}

// DSL —Ñ—É–Ω–∫—Ü–∏—è
fun myScreen(
    semanticsProvider: SemanticsNodeInteractionsProvider,
    block: MyScreen.() -> Unit
) = MyScreen(semanticsProvider).apply(block)
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —Ç–µ—Å—Ç–µ

```kotlin
@Test
fun myTest() = run {
    myScreen(composeTestRule) {
        button {
            flakySafely {
                assertIsDisplayed()
            }
            performClick()
        }
    }
}
```

---

## –°–æ–∑–¥–∞–Ω–∏–µ Page Objects

### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```kotlin
class LoginScreen(semanticsProvider: SemanticsNodeInteractionsProvider) :
    BaseComposeScreen<LoginScreen>(semanticsProvider) {

    // –ü—Ä–æ—Å—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    val usernameField = createNode("UsernameField")
    val passwordField = createNode("PasswordField")
    val loginButton = createNode("LoginButton")
    
    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    fun listItem(index: Int) = createNode("ListItem_$index")
    
    // –°–ª–æ–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
    fun verifyLoginForm() {
        usernameField { assertIsDisplayed() }
        passwordField { assertIsDisplayed() }
        loginButton { assertIsDisplayed() }
    }
}
```

### TestTags –≤ UI –∫–æ–¥–µ

–î–æ–±–∞–≤—å—Ç–µ `testTag` –∫ Compose —ç–ª–µ–º–µ–Ω—Ç–∞–º:

```kotlin
@Composable
fun LoginScreen() {
    Column {
        TextField(
            modifier = Modifier.testTag("UsernameField"),
            value = username,
            onValueChange = { username = it }
        )
        
        Button(
            modifier = Modifier.testTag("LoginButton"),
            onClick = { /* ... */ }
        ) {
            Text("Login")
        }
    }
}
```

### –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏

```kotlin
class SeriesListScreen(semanticsProvider: SemanticsNodeInteractionsProvider) :
    BaseComposeScreen<SeriesListScreen>(semanticsProvider) {

    val list = createNode("SeriesList")
    
    // –î–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –ø–æ –∏–Ω–¥–µ–∫—Å—É
    fun item(index: Int) = createNode("SeriesItem_$index")
    
    // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    fun getItemsCount() = getItemCountByPrefix("SeriesItem_")
    
    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç—É
    fun scrollToItem(index: Int) {
        scrollTo("SeriesList", "SeriesItem_$index")
    }
}
```

---

## –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞ —Å Kaspresso

```kotlin
@Test
fun completeUserFlow() = run {
    // before - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ —Ç–µ—Å—Ç–∞
    before {
        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: –º–æ–∫–∏, –¥–∞–Ω–Ω—ã–µ –∏ —Ç.–¥.
    }
    
    // –®–∞–≥ 1
    step("–û—Ç–∫—Ä—ã—Ç—å —ç–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞") {
        launchActivity()
    }
    
    // –®–∞–≥ 2
    step("–í–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ") {
        loginScreen(composeTestRule) {
            usernameField {
                performTextInput("user@example.com")
            }
        }
    }
    
    // after - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞
    after {
        // –û—á–∏—Å—Ç–∫–∞
    }
}
```

### flakySafely - –Ω–∞–¥–µ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```kotlin
// –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (5 –ø–æ–ø—ã—Ç–æ–∫, –∏–Ω—Ç–µ—Ä–≤–∞–ª 1—Å)
button {
    flakySafely {
        assertIsDisplayed()
    }
}

// –° –∫–∞—Å—Ç–æ–º–Ω—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º
button {
    flakySafely(timeoutMs = 10000) {
        assertIsDisplayed()
        assertTextContains("Login")
    }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∏

```kotlin
// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
element { assertIsDisplayed() }
element { assertIsNotDisplayed() }

// –¢–µ–∫—Å—Ç
element { assertTextEquals("Hello") }
element { assertTextContains("Hello", substring = true) }

// –°–æ—Å—Ç–æ—è–Ω–∏–µ
element { assertIsEnabled() }
element { assertIsNotEnabled() }
element { assertIsSelected() }

// –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
element { 
    assert(condition) { "Custom error message" }
}
```

### –î–µ–π—Å—Ç–≤–∏—è

```kotlin
// –ö–ª–∏–∫–∏
element { performClick() }
element { performLongClick() }

// –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
textField { performTextInput("Hello") }
textField { performTextClearance() }

// –ü—Ä–æ–∫—Ä—É—Ç–∫–∞
scrollableElement { performScrollToNode(hasText("Target")) }

// –°–≤–∞–π–ø—ã
element { performSwipeLeft() }
element { performSwipeRight() }
```

### –†–∞–±–æ—Ç–∞ —Å –¥–∏–∞–ª–æ–≥–∞–º–∏

```kotlin
step("–û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥") {
    dialogTriggerButton { performClick() }
}

step("–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏–∞–ª–æ–≥") {
    dialogScreen(composeTestRule) {
        title { assertTextEquals("Confirm") }
        message { assertTextContains("Are you sure?") }
        
        confirmButton { performClick() }
    }
}
```

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –•–æ—Ä–æ—à–æ

```kotlin
// 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Page Objects
loginScreen(composeTestRule) {
    loginButton { performClick() }
}

// 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã —Å step()
@Test
fun userLogin() = run {
    step("Open login") { /* ... */ }
    step("Enter credentials") { /* ... */ }
    step("Verify success") { /* ... */ }
}

// 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ flakySafely –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫
element {
    flakySafely {
        assertIsDisplayed()
    }
}

// 4. –î–∞–≤–∞–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ testTag
Modifier.testTag("LoginButton")  // ‚úÖ –•–æ—Ä–æ—à–æ
Modifier.testTag("btn1")          // ‚ùå –ü–ª–æ—Ö–æ

// 5. –û–¥–∏–Ω —Ç–µ—Å—Ç = –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
@Test
fun loginButton_whenClicked_navigatesToMainScreen()
```

### ‚ùå –ü–ª–æ—Ö–æ

```kotlin
// 1. –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å composeTestRule (–±–µ–∑ Page Object)
composeTestRule.onNodeWithTag("LoginButton").performClick()  // ‚ùå

// 2. –¢–µ—Å—Ç—ã –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
@Test
fun test() {
    // 100 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –±–µ–∑ step()
}

// 3. –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ flakySafely
element { assertIsDisplayed() }  // –ú–æ–∂–µ—Ç –±—ã—Ç—å flaky

// 4. –•–∞—Ä–¥–∫–æ–¥ –∑–∞–¥–µ—Ä–∂–µ–∫
Thread.sleep(5000)  // ‚ùå –ù–∏–∫–æ–≥–¥–∞ —Ç–∞–∫ –Ω–µ –¥–µ–ª–∞–π—Ç–µ!

// 5. –û–¥–∏–Ω —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ
@Test
fun testEverything() {
    // –õ–æ–≥–∏–Ω + –ø–æ–∏—Å–∫ + —Å–æ–∑–¥–∞–Ω–∏–µ + —É–¥–∞–ª–µ–Ω–∏–µ...
}
```

### üéØ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**High Priority:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ user flows (–ª–æ–≥–∏–Ω, –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**Medium Priority:**
- ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚ö†Ô∏è –ü–æ–∏—Å–∫
- ‚ö†Ô∏è –î–∏–∞–ª–æ–≥–∏ –∏ bottomsheets

**Low Priority:**
- ‚≠ï UI –∞–Ω–∏–º–∞—Ü–∏–∏ (–≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã)
- ‚≠ï –¶–≤–µ—Ç–∞ –∏ —Å—Ç–∏–ª–∏
- ‚≠ï –ú–µ–ª–∫–∏–µ UI –¥–µ—Ç–∞–ª–∏

---

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ß–µ—Ä–µ–∑ Gradle

```bash
# –í—Å–µ UI —Ç–µ—Å—Ç—ã
./gradlew connectedDebugAndroidTest

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª–∞—Å—Å
./gradlew connectedDebugAndroidTest \
  --tests com.chesire.nekome.tests.LoginFlowComposeTest

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
./gradlew connectedDebugAndroidTest \
  --tests com.chesire.nekome.tests.LoginFlowComposeTest.successfulLogin_withPageObject

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
./gradlew connectedDebugAndroidTest --info

# –° Allure –æ—Ç—á–µ—Ç–∞–º–∏
./gradlew connectedDebugAndroidTest allureReport
```

### –ß–µ—Ä–µ–∑ Android Studio

1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª —Ç–µ—Å—Ç–∞
2. –ù–∞–∂–∞—Ç—å –∑–µ–ª–µ–Ω—É—é —Å—Ç—Ä–µ–ª–∫—É —Ä—è–¥–æ–º —Å —Ç–µ—Å—Ç–æ–º
3. –í—ã–±—Ä–∞—Ç—å "Run 'testName'"

### –û—Ç—á–µ—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç—á–µ—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
```
app/build/reports/androidTests/connected/index.html
```

---

## üÜò Troubleshooting

### –¢–µ—Å—Ç –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —ç–ª–µ–º–µ–Ω—Ç

```kotlin
// 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ testTag –≤ UI
Modifier.testTag("MyButton")

// 2. –í—ã–≤–µ–¥–∏—Ç–µ semantic tree –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
printFullSemanticTree()

// 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useUnmergedTree
createNode("MyButton", useUnmergedTree = true)
```

### Flaky —Ç–µ—Å—Ç—ã

```kotlin
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ flakySafely
element {
    flakySafely(timeoutMs = 10000) {
        assertIsDisplayed()
    }
}
```

### –¢–µ—Å—Ç –ø–∞–¥–∞–µ—Ç –Ω–∞ CI –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```kotlin
// 1. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã
flakySafely(timeoutMs = 15000) { /* ... */ }

// 2. –û—Ç–∫–ª—é—á–∏—Ç–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ testOptions
android {
    testOptions {
        animationsDisabled = true
    }
}
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Kaspresso Docs](https://github.com/KasperskyLab/Kaspresso)
- [Kakao Compose](https://github.com/KakaoCup/Compose)
- [Compose Testing](https://developer.android.com/jetpack/compose/testing)
- [Allure Framework](https://docs.qameta.io/allure/)

---

## üéØ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:
‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è UI —Ç–µ—Å—Ç–æ–≤ –∫–∞–∫ –≤ MyBroker  
‚úÖ –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã (BaseComposeTest, BaseComposeScreen)  
‚úÖ –ü—Ä–∏–º–µ—Ä—ã Page Objects  
‚úÖ –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤  
‚úÖ Best practices  

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –î–æ–±–∞–≤—å—Ç–µ testTags –≤ –≤–∞—à UI –∫–æ–¥
2. –°–æ–∑–¥–∞–π—Ç–µ Page Objects –¥–ª—è –≤–∞—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤
3. –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö user flows
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—á–µ—Ç—ã

–£–¥–∞—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ


